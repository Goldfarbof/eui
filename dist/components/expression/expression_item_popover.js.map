{"version":3,"sources":["../../../src/components/expression/expression_item_popover.js"],"names":["POPOVER_ALIGN","outsideClickNotifier","props","handleClickOutside","bind","document","addEventListener","removeEventListener","event","wrapperRef","isVisible","target","contains","onOutsideClick","rest","node","Component","propTypes","func","isRequired","bool","KuiExpressionItemPopover","className","title","children","rootRef","align","classes","string","oneOf"],"mappings":";;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;;;;AAEA,IAAMA,gBAAgB,CACpB,MADoB,EAEpB,OAFoB,CAAtB;;AAKA;;;;AAIA,IAAMC,uBAAuB,SAAvBA,oBAAuB;AAAA;;AAAA;AAAA;;AAC3B,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA,kHACXA,KADW;;AAGjB,YAAKC,kBAAL,GAA0B,MAAKA,kBAAL,CAAwBC,IAAxB,OAA1B;AAHiB;AAIlB;;AAL0B;AAAA;AAAA,0CAOP;AAClBC,iBAASC,gBAAT,CAA0B,WAA1B,EAAuC,KAAKH,kBAA5C;AACD;AAT0B;AAAA;AAAA,6CAWJ;AACrBE,iBAASE,mBAAT,CAA6B,WAA7B,EAA0C,KAAKJ,kBAA/C;AACD;AAb0B;AAAA;AAAA,yCAeRK,KAfQ,EAeD;AACxB,YAAI,CAAC,KAAKC,UAAV,EAAsB;AACpB;AACD;;AAED,YAAI,CAAC,KAAKP,KAAL,CAAWQ,SAAhB,EAA2B;AACzB;AACD;;AAED,YAAK,KAAKD,UAAL,KAAoBD,MAAMG,MAA3B,IAAsC,CAAC,KAAKF,UAAL,CAAgBG,QAAhB,CAAyBJ,MAAMG,MAA/B,CAA3C,EAAmF;AACjF,eAAKT,KAAL,CAAWW,cAAX;AACD;AACF;AA3B0B;AAAA;AAAA,+BA6BlB;AAAA;;AAAA,qBAC6B,KAAKX,KADlC;AAAA,YACCW,cADD,UACCA,cADD;AAAA,YACoBC,IADpB,yDACyC;;;AAChD,eAAO,8BAAC,gBAAD,aAAkB,SAAS,iBAACC,IAAD;AAAA,mBAAS,OAAKN,UAAL,GAAkBM,IAA3B;AAAA,WAA3B,IAAgED,IAAhE,EAAP;AACD;AAhC0B;;AAAA;AAAA,IAAkC,gBAAME,SAAxC,UAkCpBC,SAlCoB,GAkCR;AACjBJ,oBAAgB,oBAAUK,IAAV,CAAeC,UADd;AAEjBT,eAAW,oBAAUU,IAAV,CAAeD;AAFT,GAlCQ;AAAA,CAA7B;;AAwCA,IAAIE,2BAA2B,wCAQzB;AAAA,MAPJC,SAOI,QAPJA,SAOI;AAAA,MANJC,KAMI,QANJA,KAMI;AAAA,MALJb,SAKI,QALJA,SAKI;AAAA,MAJJc,QAII,QAJJA,QAII;AAAA,MAHJC,OAGI,QAHJA,OAGI;AAAA,wBAFJC,KAEI;AAAA,MAFJA,KAEI,8BAFI,MAEJ;AAAA,MADDZ,IACC;;AACJ,MAAMa,UAAU,0BAAW,4BAAX,EAAyCL,SAAzC,EAAoD;AAClE,4CAAwC,CAACZ,SADyB;AAElE,8CAA0CgB,UAAU;AAFc,GAApD,CAAhB;AAIA,SACE;AAAA;AAAA;AACE,WAAKD,OADP;AAEE,iBAAWE;AAFb,OAGMb,IAHN;AAKE;AAAA;AAAA,QAAK,WAAU,iCAAf;AACGS;AADH,KALF;AAQE;AAAA;AAAA,QAAK,WAAU,mCAAf;AACGC;AADH;AARF,GADF;AAcD,CA3BD;;AA6BAH,yBAAyBJ,SAAzB,GAAqC;AACnCK,aAAW,oBAAUM,MADc;AAEnCL,SAAO,oBAAUK,MAAV,CAAiBT,UAFW;AAGnCT,aAAW,oBAAUU,IAAV,CAAeD,UAHS;AAInCK,YAAU,oBAAUT,IAJe;AAKnCW,SAAO,oBAAUG,KAAV,CAAgB7B,aAAhB,CAL4B;AAMnC;AACAyB,WAAS,oBAAUP,IAAV,CAAeC;AAPW,CAArC;;AAUA,QAIEE,wBAJF,8BAA2BpB,qBAAqBoB,wBAArB,CAA3B;;QAGErB,a,GAAAA,a;QACAqB,wB,GAAAA,wB","file":"expression_item_popover.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nconst POPOVER_ALIGN = [\n  'left',\n  'right',\n];\n\n/*\nWith some modification copy-pasted from\nhttps://stackoverflow.com/questions/32553158/detect-click-outside-react-component\n*/\nconst outsideClickNotifier = WrappedComponent => class extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleClickOutside);\n  }\n\n  handleClickOutside(event) {\n    if (!this.wrapperRef) {\n      return;\n    }\n\n    if (!this.props.isVisible) {\n      return;\n    }\n\n    if ((this.wrapperRef !== event.target) && !this.wrapperRef.contains(event.target)) {\n      this.props.onOutsideClick();\n    }\n  }\n\n  render() {\n    const { onOutsideClick, ...rest } = this.props; //eslint-disable-line no-unused-vars\n    return <WrappedComponent rootRef={(node)=> this.wrapperRef = node} {...rest} />;\n  }\n\n  static propTypes = {\n    onOutsideClick: PropTypes.func.isRequired,\n    isVisible: PropTypes.bool.isRequired,\n  };\n};\n\nlet KuiExpressionItemPopover = ({\n  className,\n  title,\n  isVisible,\n  children,\n  rootRef,\n  align = 'left',\n  ...rest\n}) => {\n  const classes = classNames('kuiExpressionItem__popover', className, {\n    'kuiExpressionItem__popover--isHidden': !isVisible,\n    'kuiExpressionItem__popover--alignRight': align === 'right'\n  });\n  return (\n    <div\n      ref={rootRef}\n      className={classes}\n      {...rest}\n    >\n      <div className=\"kuiExpressionItem__popoverTitle\">\n        {title}\n      </div>\n      <div className=\"kuiExpressionItem__popoverContent\">\n        {children}\n      </div>\n    </div>\n  );\n};\n\nKuiExpressionItemPopover.propTypes = {\n  className: PropTypes.string,\n  title: PropTypes.string.isRequired,\n  isVisible: PropTypes.bool.isRequired,\n  children: PropTypes.node,\n  align: PropTypes.oneOf(POPOVER_ALIGN),\n  //only for outsideClickNotifier\n  rootRef: PropTypes.func.isRequired,\n};\n\nKuiExpressionItemPopover = outsideClickNotifier(KuiExpressionItemPopover);\n\nexport {\n  POPOVER_ALIGN,\n  KuiExpressionItemPopover\n};\n"]}